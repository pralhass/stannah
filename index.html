<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <title>Selecionar ponto focal</title>
    <style>
      body {
        font-family: sans-serif;
        text-align: center;
        margin-top: 40px;
      }
      input, select, button {
        padding: 10px;
        font-size: 16px;
        margin: 10px;
        width: 300px;
      }
      img {
        margin-top: 20px;
        max-width: 80%;
        cursor: crosshair;
        border: 1px solid #ccc;
      }
    </style>
  </head>
  <body>
    
    <h2>Preenche os dados e clica no ponto focal da imagem</h2>

    <input type="text" id="title" placeholder="Título" />
    <br />
    <input type="text" id="subtitle" placeholder="Subtítulo" />
    <br />
    <input type="text" id="cta" placeholder="Call to Action" />
    <br />
    <input type="text" id="imageUrlInput" placeholder="URL da Imagem" />
    <br />
    <input type="text" id="videoUrlInput" placeholder="URL do Vídeo" />
    <br />
    <select id="template">
      <option value="1st Promo">1st Promo</option>
      <option value="1st Promo">StannahGuidelines</option>
      <option value="1st Promo">NewLookV1</option>
      <option value="1st Promo">NewLookV2</option>
      <option value="1st Promo">NewLookV3</option>
      <option value="1st Promo">NewLookV4</option>
    </select>
    <br />
    <button onclick="loadImage()">Carregar imagem</button>
    <br />
    <img id="image" style="display:none;" />

    <script>
      const img = document.getElementById("image");
      const imageUrlInput = document.getElementById("imageUrlInput");

      // Função para converter links do Google Drive
function convertGoogleDriveUrl(url) {
  const match = url.match(/\/d\/([a-zA-Z0-9_-]+)\//);
  if (match && match[1]) {
    const id = match[1];
    return `https://drive.google.com/thumbnail?id=${id}&sz=w1000`;
  }
  return url;
}
      function loadImage() {
        const rawUrl = imageUrlInput.value.trim();
        const url = convertGoogleDriveUrl(rawUrl);
        img.src = url;
        img.style.display = "block";
      }

      img.addEventListener("click", function (e) {
        const rect = img.getBoundingClientRect();
        const x = ((e.clientX - rect.left) / img.width) * 100;
        const y = ((e.clientY - rect.top) / img.height) * 100;
      
        const data = {
          title: document.getElementById("title").value,
          subtitle: document.getElementById("subtitle").value,
          cta: document.getElementById("cta").value,
          image_url: document.getElementById("imageUrlInput").value,
          video_url: document.getElementById("videoUrlInput").value,
          template: document.getElementById("template").value,
          focus_x: Math.round(x),
          focus_y: Math.round(y)
        };
      
        fetch("https://hook.eu2.make.com/ud2ltvos440cz2b6kw82dykit54gxurv", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
      
        alert(`Dados enviados com sucesso!\nX: ${Math.round(x)}\nY: ${Math.round(y)}`);
      });

    </script>
  </body>
</html>
